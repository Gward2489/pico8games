pico-8 cartridge // http://www.pico-8.com
version 16
__lua__

scrn ={}
p1 = {}
p2 = {}

function _init()
	show_menu()
end

function _update()
	scrn.upd()
end

function _draw()
	scrn.drw()
end

function show_menu()
	scrn.upd = update_menu
	scrn.drw = draw_menu
	
end

function update_menu()
	if (btnp(4)) then run_game() end
end

function draw_menu()
	cls()
	
	spr(0,0,0,20,20)
	
	print("player 1  -left/right  keys to turn",10,60,9)
	print("player 2 - s/f keys",10,80,8)
	
	print("press 2 to start",30,50,7)

end

function run_game()

	scrn.upd = _update_game
	scrn.drw = _draw_game

	p1.x = 32
	p1.y = 64
	p1.dir = 1
	p1.dead = false

	p2.x = 96
	p2.y = 64
	p2.dir = 1
	p2.dead = false

	cls()
	rect(0,0,127,127,11)
	sfx(0,0,0)
end

function update_player(player,player_number)
	
	local last_dir = player.dir
	
	if (player.dir == 1) then player.y=player.y-1 end 
	if (player.dir == 2) then player.x=player.x+1 end
	if (player.dir == 3) then player.y=player.y+1 end
	if (player.dir == 4) then player.x=player.x-1 end

	if (btnp(0,player_number)) then player.dir = player.dir - 1 end
	if (btnp(1,player_number)) then player.dir = player.dir + 1 end

	if (player.dir > 4) then player.dir = 1 end
	if (player.dir < 1) then player.dir = 4 end

	if (player.dir != last_dir) then sfx(1,1,0) end 

	if (pget(player.x,player.y) != 0) then _show_game_over()
		player.dead = true
 	_show_game_over()
		
 end

end

function _update_game()
	update_player(p1,0)
	update_player(p2,1)
end

function _draw_game()
	pset(p1.x,p1.y,12)
	pset(p2.x,p2.y,14)
end

function _show_game_over()

scrn.upd = _update_game_over
	scrn.drw = _draw_game_over

	p1.x = 64
	p1.y = 64
	p1.dir = 1
	sfx(2,0,0)
	end

function _update_game_over()
	if (btnp(4)) then show_menu() end
end


anim_step = 0

function _draw_game_over()
	print("game over !",40,50,7)
	if (p1.dead) then
	circfill(p1.x,p1.y,anim_step/5,anim_step)
		print("player 2 wins",40,60,7)
	end
	if (p2.dead) then
	circfill(p2.x,p2.y,anim_step/5,anim_step)
		print("player 1 wins",40,60,7)
	end
	print("press z to continue",40,70,8)
	
	anim_step = anim_step +1
	if anim_step > 16 then anim_step =0 end
	
	
end

__gfx__
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
007007000000000000000000000000000000cccccccccccccccccc00000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000cccccccccccccccccccccccc000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000ccccccccccccc000cc000000000ccccc00000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000ccccccccc00000000ccc0000000000ccccc000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000cccccc000000000000000cc000000000000cccc0000000000ccc000000000000000000000000cc00000000000000000000000000000
000000000000000000000ccccccc00000000000000cc0000000000000ccc0000000000ccc00000000000000000000000ccc000000000000000ccc00000000000
000000000000000000000cccc0cc00000000000000cc0000000000000ccc0000000000ccc00000000000000000000000cc0000000000000000ccc00000000000
00000000000000000000cccc00cc00000000000000cc000000000000ccc00000000000cccc0000ccc00000000000000ccc000000000000000ccc000000000000
0000000000000000000cccc000cc00000000000000cc000000cccccccc0000000000cccccc0000ccc00000000000000cc000000000000000ccc0000000000000
0000000000000000000ccc0000ccc0000000000000ccccccccccccccc00000000000ccc0ccc0000cc0000000000000ccc0000000cc000000ccc0000000000000
000000000000000000ccc000000cc0000000000000ccccccccc0000000000000000ccc000cc0000cc0000000000000ccc000000ccc00000ccc00000000000000
000000000000000000cc0000000cc0000000000000cc0ccccc00000000000000000cc0000cc0000ccc0000ccc0000ccc0000000ccc0000cccc00000000000000
000000000000000000000000000cc0000000000000cc0000ccccc000000000000cccc0000cc00000cc0000ccc0000ccc000000ccccc000ccc000000000000000
000000000000000000000000000cc0000000000000cc00000ccccc0000000000cccc00000ccc0000cc000cccc0000cc0000000ccccc00ccc0000000000000000
000000000000000000000000000ccc000000000000cc00000000ccc000000000cccccccccccc0000cc000cccc000ccc000000ccc0cc0ccc00000000000000000
0000000000000000000000000000cc000000000000cc00000000ccc00000000ccccccccccccc0000cc00ccccc00ccc0000000ccc0cc0ccc00000000000000000
0000000000000000000000000000cc000000000000cc000000000cc0000000ccc000000000cc0000cc00cc0ccc0cc0000000ccc00ccccc000000000000000000
0000000000000000000000000000cc000000000000cc000000000ccc00000ccc0000000000ccc000cc0ccc0cccccc0000000cc000cccc0000000000000000000
0000000000000000000000000000cc000000000000cc0000000000cc0000ccc00000000000ccc000ccccc000cccc0000000ccc000cccc0000000000000000000
0000000000000000000000000000cc000000000000cc0000000000ccc0cccc0000000000000cc000ccccc000ccc0000000ccc0000ccc00000000000000000000
0000000000000000000000000000cc000000000000000000000000ccc0ccc0000000000000000000000000000000000000cc0000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000cc00cccccc00000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000cc0cccccccccc000000000000000000000000ccc00000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000ccccc0000cccc00000cc0000000000000000cccc00000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000ccccc000000cc00000ccc000ccc00000000cccc0000000000000cccc0000000000000000000000000
000000000000000000000000000000000000000000000000ccc000000ccc00000ccc000ccc0000000ccc000000000000000ccccccc0000000000000000000000
000000000000000000000000000000000000000000000000ccc00000cccc000000cc0000cc00000ccccc000000cccccc00000cccccc000000000000000000000
000000000000000000000000000000000000000000000000cc0000cccc00000000cc0000cc000ccccc0000000ccccccc00000000ccc000000000000000000000
000000000000000000000000000000000000000000000000cc0000cccccc000000cc0000cc0ccccc00000000ccc0cccc00000000ccc000000000000000000000
000000000000000000000000000000000000000000000000cc00000cccccc00000ccc000cccccccccc00000cccccccc00000000cccc000000000000000000000
000000000000000000000000000000000000000000000000cccc000000ccc00000ccc0000ccc00ccccc000cccccccc00000000cccc0000000000000000000000
000000000000000000000000000000000000000000000000ccccccccccccc000000cc0000cc000000ccc00cc0ccc000000000ccc000000000000000000000000
000000000000000000000000000000000000000000000000ccccccccccc00000000000000cc0000000cc00cc000000000000cccc000ccccccc00000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000cc00000000000ccccccccc00000cccccccccccccc00000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000cc00000000000ccccccccc00000cccccccc00000000000000000000
__label__
bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb0aaaaa0bbbbbbbbbbbbbbbbbbbbbbbbbbbb
b000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000aaaaa0000000000000000000000000000b
b0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000aaa00000000000000000000000000000b
b000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000b
b00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000e000000000000000000000000000000b
b00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000e000000000000000000000000000000b
b00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000e000000000000000000000000000000b
b00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000e000000000000000000000000000000b
b00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000e000000000000000000000000000000b
b00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000e000000000000000000000000000000b
b00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000e000000000000000000000000000000b
b00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000e000000000000000000000000000000b
b00000000000000000000cccccccccccc000000000000000000000000000000000000000000000000000000000000000e000000000000000000000000000000b
b0000000000000000000000000000000c000000000000000000000000000000000000000000000000000000000000000e000000000000000000000000000000b
b0000000000000000000000000000000c000000000000000000000000000000000000000000000000000000000000000e000000000000000000000000000000b
b0000000000000000000000000000000c000000000000000000000000000000000000000000000000000000000000000e000000000000000000000000000000b
b0000000000000000000000000000000c000000000000000000000000000000000000000000000000000000000000000e000000000000000000000000000000b
b0000000000000000000000000000000c000000000000000000000000000000000000000000000000000000000000000e000000000000000000000000000000b
b0000000000000000000000000000000c000000000000000000000000000000000000000000000000000000000000000e000000000000000000000000000000b
b0000000000000000000000000000000c000000000000000000000000000000000000000000000000000000000000000e000000000000000000000000000000b
b0000000000000000000000000000000c000000000000000000000000000000000000000000000000000000000000000e000000000000000000000000000000b
b0000000000000000000000000000000c000000000000000000000000000000000000000000000000000000000000000e000000000000000000000000000000b
b0000000000000000000000000000000c000000000000000000000000000000000000000000000000000000000000000e000000000000000000000000000000b
b0000000000000000000000000000000c000000000000000000000000000000000000000000000000000000000000000e000000000000000000000000000000b
b0000000000000000000000000000000c000000000000000000000000000000000000000000000000000000000000000e000000000000000000000000000000b
b0000000000000000000000000000000c000000000000000000000000000000000000000000000000000000000000000e000000000000000000000000000000b
b0000000000000000000000000000000c000000000000000000000000000000000000000000000000000000000000000e000000000000000000000000000000b
b0000000000000000000000000000000c000000000000000000000000000000000000000000000000000000000000000e000000000000000000000000000000b
b0000000000000000000000000000000c000000000000000000000000000000000000000000000000000000000000000e000000000000000000000000000000b
b0000000000000000000000000000000c000000000000000000000000000000000000000000000000000000000000000e000000000000000000000000000000b
b0000000000000000000000000000000c000000000000000000000000000000000000000000000000000000000000000e000000000000000000000000000000b
b0000000000000000000000000000000c000000000000000000000000000000000000000000000000000000000000000e000000000000000000000000000000b
b0000000000000000000000000000000c000000000000000000000000000000000000000000000000000000000000000e000000000000000000000000000000b
b0000000000000000000000000000000c000000000000000000000000000000000000000000000000000000000000000e000000000000000000000000000000b
b0000000000000000000000000000000c000000000000000000000000000000000000000000000000000000000000000e000000000000000000000000000000b
b0000000000000000000000000000000c000000000000000000000000000000000000000000000000000000000000000e000000000000000000000000000000b
b0000000000000000000000000000000c000000000000000000000000000000000000000000000000000000000000000e000000000000000000000000000000b
b0000000000000000000000000000000c000000000000000000000000000000000000000000000000000000000000000e000000000000000000000000000000b
b0000000000000000000000000000000c000000000000000000000000000000000000000000000000000000000000000e000000000000000000000000000000b
b0000000000000000000000000000000c000000000000000000000000000000000000000000000000000000000000000e000000000000000000000000000000b
b0000000000000000000000000000000c000000000000000000000000000000000000000000000000000000000000000e000000000000000000000000000000b
b0000000000000000000000000000000c000000000000000000000000000000000000000000000000000000000000000e000000000000000000000000000000b
b0000000000000000000000000000000c000000000000000000000000000000000000000000000000000000000000000e000000000000000000000000000000b
b0000000000000000000000000000000c000000000000000000000000000000000000000000000000000000000000000e000000000000000000000000000000b
b0000000000000000000000000000000c000000000000000000000000000000000000000000000000000000000000000e000000000000000000000000000000b
b0000000000000000000000000000000c000000000000000000000000000000000000000000000000000000000000000e000000000000000000000000000000b
b0000000000000000000000000000000c000000000000000000000000000000000000000000000000000000000000000e000000000000000000000000000000b
b0000000000000000000000000000000c000000000000000000000000000000000000000000000000000000000000000e000000000000000000000000000000b
b0000000000000000000000000000000c000000000000000000000000000000000000000000000000000000000000000e000000000000000000000000000000b
b0000000000000000000000000000000c000000000000000000000000000000000000000000000000000000000000000e000000000000000000000000000000b
b0000000000000000000000000000000c000000007707770777077700000077070707770777000000700000000000000e000000000000000000000000000000b
b0000000000000000000000000000000c000000070007070777070000000707070707000707000000700000000000000e000000000000000000000000000000b
b0000000000000000000000000000000c000000070007770707077000000707070707700770000000700000000000000e000000000000000000000000000000b
b0000000000000000000000000000000c000000070707070707070000000707077707000707000000000000000000000e000000000000000000000000000000b
b0000000000000000000000000000000c000000077707070707077700000770007007770707000000700000000000000e000000000000000000000000000000b
b0000000000000000000000000000000c000000000000000000000000000000000000000000000000000000000000000e000000000000000000000000000000b
b0000000000000000000000000000000c000000000000000000000000000000000000000000000000000000000000000e000000000000000000000000000000b
b0000000000000000000000000000000c000000000000000000000000000000000000000000000000000000000000000e000000000000000000000000000000b
b0000000000000000000000000000000c000000000000000000000000000000000000000000000000000000000000000e000000000000000000000000000000b
b0000000000000000000000000000000c000000000000000000000000000000000000000000000000000000000000000e000000000000000000000000000000b
b0000000000000000000000000000000c000000077707000777070707770777000007700000070707770770007700000e000000000000000000000000000000b
b0000000000000000000000000000000c000000070707000707070707000707000000700000070700700707070000000e000000000000000000000000000000b
b0000000000000000000000000000000c000000077707000777077707700770000000700000070700700707077700000e000000000000000000000000000000b
b0000000000000000000000000000000c000000070007000707000707000707000000700000077700700707000700000e000000000000000000000000000000b
b0000000000000000000000000000000c000000070007770707077707770707000007770000077707770707077000000e000000000000000000000000000000b
b000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000b
b000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000b
b000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000b
b000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000b
b000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000b
7000000007707770707077700000777077700770770077007770777007700000088000008880088000000880088088008880888088008080888000000000000b
0700000070007070707070000000070070707070707070707000777070700000008000000800808000008000808080800800080080808080800000000000000b
0070000077707770707077000000070077007070707070707700707070700000080000000800808000008000808080800800080080808080880000000000000b
0700000000707070777070000000070070707070707070707000707070700000000000000800808000008000808080800800080080808080800000000000000b
7000000077007070070077700000070070707700707077707770707077000000088000000800880000000880880080800800888080800880888000000000000b
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000b
06606660606066606600000066606660066066006600666066600660000066606660000000000000000000000000000000000000000000000000000000000000
60006060606060006060000006006060606060606060600066606060000060606060000000000000000000000000000000000000000000000000000000000000
66606660606066006060000006006600606060606060660060606060000066606660000000000000000000000000000000000000000000000000000000000000
00606060666060006060000006006060606060606060600060606060000060006060000000000000000000000000000000000000000000000000000000000000
66006060060066606660000006006060660060606660666060606600060060006660000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
7000000088880000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000b
0700000088880000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000b
0070000088880000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000b
0700000088880000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000b
7000000088880000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000b
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000b
b000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000b
b000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000b
b000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000b
b000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000b
b000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000b
b000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000b
b000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000b
b000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000b
b000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000b
b000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000b
b000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000b
b000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000b
b000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000b
b000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000b
b000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000b
b000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000b
b000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000b
b000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000b
b000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000b
b000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000b
b000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000b
b000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000b
b000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000b
b000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000b
b000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000b
b000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000b
b000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000b
b000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000b
b000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000b
b000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000b
b000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000b
b000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000b
b000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000b
b000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000b
b000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000b
b000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000b
b000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000b
b000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000b
b000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000b
bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb

__sfx__
0004000d0305003050050500605007050080500905009050060500305002050020500305003050000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00020000060500a05010050140501805018050140500d050070500205001050000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000c000021050200501e0501b050190501705014050100500d0500a05007050010500105000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
